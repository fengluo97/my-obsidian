对并发的深刻理解


## 并发编程

### 多线程

### 线程池

池化技术，提高效率

### 什么是线程安全，什么时候需要考虑线程安全？

### 如何保证线程安全？

一般为了解决数据一致性的问题，有三种角度的方案进行选择

排队（最常见的有锁机制，阻塞队列，管道，屏障等）  
投票（Paxos 算法、Raft 算法等分布式的方案）  
隔离（ThreadLocal 线程本地的局部变量存储方式）

线程异步执行同步化  
线程级别的数据隔离

Synchronized + wait + notify+ notifyAll：简单粗暴，性能较差，可重入，不可中断，不公平

Lock + Condition + await + signal + signalAll：灵活，可重入，可中断，可公平/不公平

volatile：轻量的同步机制，保证可见性，禁止指令重排序，不保证原子性

原子类：乐观锁，底层实现是 CAS 算法，是由硬件直接支持来保证原子性的，有三个操作数：内存位置V、旧的预期值A和新值B，当且仅当V符合预期值A时，CAS用新值B原子化地更新V的值，否则，它什么都不做

基于 AQS 同步器工具类：CountDownLatch（某一线程在开始运行前等待 n 个线程执行完毕）、Semaphore（Semaphore 经常用于限制获取某种资源的线程数量）、CyclicBarrier（多个线程互相等待，直到到达同一个同步点，再继续一起执行）

阻塞队列 BlockingQueue

### 进程同步和线程同步

进程同步也是4个方式：信号量、互斥量、管程和进程间通信；线程同步才是信号量、互斥量、临界区、事件